!function(){"use strict";var t,e=require("./header"),i=require("./utils"),n=512;function o(e){this.written=0,t=(e||20)*n,this.out=i.clean(t)}o.prototype.append=function(o,r,s,h){var u,a,c,p,f,l,d;if("string"==typeof r)r=i.stringToUint8(r);else if(r.constructor!==Uint8Array.prototype.constructor)throw"Invalid input type. You gave me: "+r.constructor.toString().match(/function\s*([$A-Za-z_][0-9A-Za-z_]*)\s*\(/)[1];return"function"==typeof s&&(h=s,s={}),c=(s=s||{}).mode||4095&parseInt("777",8),p=s.mtime||Math.floor(+new Date/1e3),f=s.uid||0,l=s.gid||0,u={fileName:o,fileMode:i.pad(c,7),uid:i.pad(f,7),gid:i.pad(l,7),fileSize:i.pad(r.length,11),mtime:i.pad(p,11),checksum:"        ",type:"0",ustar:"ustar  ",owner:s.owner||"",group:s.group||""},a=0,Object.keys(u).forEach(function(t){var e,i,n=u[t];for(e=0,i=n.length;e<i;e+=1)a+=n.charCodeAt(e)}),u.checksum=i.pad(a,6)+"\0 ",d=e.format(u),this.out.set(d,this.written),this.written+=d.length,r.length+this.written>this.out.length&&(this.out=i.extend(this.out,this.written,r.length,t)),this.out.set(r,this.written),this.written+=r.length+(n-(r.length%n||n)),this.out.length-this.written<2*n&&(this.out=i.extend(this.out,this.written,2*n,t)),"function"==typeof h&&h(this.out),this.out},o.prototype.clear=function(){this.written=0,this.out=i.clean(t)},module.exports=o}();