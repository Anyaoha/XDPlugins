const ImageService=require("./ImageService");let optimizeBtn,optimizeOptions,optimizeCheck,scaleRange,qualityRange,optimizeResetBtn,optimizeOkBtn,scaleValue,qualityValue,toggleOptimize=function(){optimizeBtn.setAttribute("uxp-selected",this.checked),scaleRange.disabled=!this.checked,qualityRange.disabled=!this.checked},changeScale=function(){scaleValue.innerHTML=`${this.value}x`},changeQuality=function(){qualityValue.innerHTML=`${this.value}%`},resetOptimize=function(){optimizeCheck.checked=ImageService.QUALITY_DEF.active,optimizeBtn.setAttribute("uxp-selected",optimizeCheck.checked),scaleRange.disabled=!optimizeCheck.checked,qualityRange.disabled=!optimizeCheck.checked,scaleRange.value=ImageService.QUALITY_DEF.scale,scaleValue.innerHTML=`${scaleRange.value}x`,qualityRange.value=ImageService.QUALITY_DEF.quality,qualityValue.innerHTML=`${qualityRange.value}%`},saveOptimize=function(){ImageService.QUALITY_SAVED.active=optimizeCheck.checked,ImageService.QUALITY_SAVED.scale=scaleRange.value,ImageService.QUALITY_SAVED.quality=qualityRange.value,optimizeOptions.style.display="none"},documentClickForOptimizePanel=function(e){let i=e.target;do{if(i.id===optimizeOptions.id||i.id==optimizeBtn.id)return;i=i.parentNode}while(i);saveOptimize()};function OptimizeService(){optimizeBtn=$first("#optimizeBtn"),optimizeOptions=$first("#optimizeOptions"),scaleValue=$first("#scaleValue"),scaleRange=$first("#scaleRange"),qualityValue=$first("#qualityValue"),qualityRange=$first("#qualityRange"),optimizeCheck=$first("#optimizeCheck"),optimizeResetBtn=$first("#optimizeResetBtn"),optimizeOkBtn=$first("#optimizeOkBtn"),this.Cancel()}OptimizeService.prototype.Cancel=function(){optimizeCheck.checked=ImageService.QUALITY_SAVED.active,optimizeBtn.setAttribute("uxp-selected",optimizeCheck.checked),scaleRange.disabled=!optimizeCheck.checked,qualityRange.disabled=!optimizeCheck.checked,scaleRange.value=ImageService.QUALITY_SAVED.scale,scaleValue.innerHTML=`${scaleRange.value}x`,qualityRange.value=ImageService.QUALITY_SAVED.quality,qualityValue.innerHTML=`${qualityRange.value}%`,optimizeOptions.style.display="none"},OptimizeService.prototype.Toggle=function(){"none"===optimizeOptions.style.display?(optimizeOptions.style.display="block",optimizeCheck.addEventListener("change",toggleOptimize),scaleRange.addEventListener("change",changeScale),qualityRange.addEventListener("change",changeQuality),optimizeResetBtn.addEventListener("click",resetOptimize),optimizeOkBtn.addEventListener("click",saveOptimize),document.addEventListener("click",documentClickForOptimizePanel)):(optimizeOptions.style.display="none",optimizeCheck.removeEventListener("change",toggleOptimize),scaleRange.removeEventListener("change",changeScale),qualityRange.removeEventListener("change",changeQuality),optimizeResetBtn.removeEventListener("click",resetOptimize),optimizeOkBtn.removeEventListener("click",saveOptimize),document.removeEventListener("click",documentClickForOptimizePanel))},OptimizeService.prototype.Disable=function(e){optimizeBtn.disabled=e,optimizeOptions.disabled=e,scaleValue.disabled=e,scaleRange.disabled=e,qualityValue.disabled=e,qualityRange.disabled=e,optimizeCheck.disabled=e,optimizeResetBtn.disabled=e,optimizeOkBtn.disabled=e},module.exports=OptimizeService;