var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,b,d,e){if(b){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in d||(d[c]={});d=d[c]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function d(a){return a instanceof c?a:new c(function(g,b){g(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};c.prototype.createResolveAndReject_=
function(){function a(a){return function(g){c||(c=!0,a.call(b,g))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var f=new b;c.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};c.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};c.prototype.then=function(a,b){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(m){g(m)}}:
b}var e,g,h=new c(function(a,b){e=a;g=b});this.callWhenSettled_(d(a,e),d(b,g));return h};c.prototype["catch"]=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};c.resolve=d;c.reject=function(a){return new c(function(b,c){c(a)})};c.race=function(a){return new c(function(b,
c){for(var e=$jscomp.makeIterator(a),g=e.next();!g.done;g=e.next())d(g.value).callWhenSettled_(b,c)})};c.all=function(a){var b=$jscomp.makeIterator(a),e=b.next();return e.done?d([]):new c(function(a,c){function g(b){return function(c){h[b]=c;f--;0==f&&a(h)}}var h=[],f=0;do h.push(void 0),f++,d(e.value).callWhenSettled_(g(h.length-1),c),e=b.next();while(!e.done)})};return c},"es6","es3");
$jscomp.polyfill("Promise.prototype.finally",function(a){return a?a:function(a){return this.then(function(b){return Promise.resolve(a()).then(function(){return b})},function(b){return Promise.resolve(a()).then(function(){throw b;})})}},"es9","es3");$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(a){this.abruptCompletion_={"return":a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){var d=$jscomp.makeIterator(a),e=d.next();$jscomp.generator.ensureIteratorResultIsObject_(e);if(e.done)this.yieldResult=e.value,this.nextAddress=b;else return this.yieldAllIterator_=d,this.yield(e.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){var d=this.finallyContexts_.splice(b||0)[0];if(d=this.abruptCompletion_=this.abruptCompletion_||d){if(d.isException)return this.jumpToErrorHandler_();void 0!=d.jumpTo&&this.finallyAddress_<d.jumpTo?(this.nextAddress=d.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_["return"]);this.context_["return"](a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,d){try{var e=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var c=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a["return"],done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this["throw"]=function(b){return a.throw_(b)};this["return"]=function(b){return a.return_(b)};$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){var d=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(d,a.prototype);return d};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function d(b){return a["throw"](b)}return new Promise(function(e,c){function f(a){a.done?e(a.value):Promise.resolve(a.value).then(b,d).then(f,c)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
global.setTimeout=function(a){a()};global.clearTimeout=function(a){};var $=require("./jquery.min.js"),apiUri="https://app.goproof.net",signUpUrl="https://app.goproof.net/Home/Signup",application="XD",t=function(a){return document.querySelector(a)},fs=require("uxp").storage.localFileSystem,emailStore="DataStore.txt",helpGifStore="HelpGifStore.txt",os=require("os"),okClicked=!1,loginState=!1;
function createDialog(a,b){a=void 0===a?"dialog":a;var d="#"+a,e=document.querySelector(d);if(!e||null!==b&&"true"!==b||okClicked){if(e&&!okClicked&&"false"===b)return e;if(e&&okClicked)return $("#loginForm").css("display","block"),e;(null===b||"true"===b&&!okClicked)&&$("#introGif").css("display","block")}else return $("#introGif").css("display","block"),e;document.body.innerHTML='\n    <style>\n        body {\n            font-family: "Montserrat", sans-serif\n        }\n\n        #dialog {\n            width: 550px;\n            height:670px;\n        }\n\n        #dialog form {\n            /*border:1px solid red;*/\n        }\n\n        #uploadForm {\n            display: none;\n        }\n\n        #error {\n            display:none;\n        }\n\n        #finalForm {\n            display:none;\n        }\n\n\n        #loginPanel {\n            width:89%;\n            margin:0 auto;\n            /*border:1px solid purple;*/\n            background-image: url(LoginLogo.png);\n            background-repeat: no-repeat;\n            background-attachment: fixed;\n            height:430px;\n        }\n\n        #username {\n            background-color:white;\n        }\n\n        #go {\n            width:95%;\n        }\n\n        #maskpassword {\n            background-color:white;\n        }\n\n        #password {\n            display:none;\n        }\n\n        #logoDiv {\n            width:50%;\n            margin:0 auto;\n            margin-bottom:15px;\n            height:40px;\n            /*border:1px solid blue;*/\n        }\n\n        #userInfo {\n            width:75%;\n            margin:0 auto;\n            margin-top:85px;\n            /*border:1px solid blue;*/\n        }\n\n        #btnTest {\n            width:20px;\n        }\n\n        #loginCtrls {\n            /*border:1px solid orange;*/\n            width:75%;\n            margin:0 auto;\n        }\n\n        #selectUserList {\n            width:75%;\n            margin:0 auto;\n            display: none;\n        }\n\n        #goCtrls {\n            /*border:1px solid orange;*/\n            width:75%;\n            margin:0 auto;\n            display: none;\n        }\n\n        #errorForm {\n            display:none;\n        }\n\n        .inpWhiteBG {\n            background-color: white;\n        }\n\n        #dialog {\n            background-color: #red;\n        }\n\n        .uploadDivs {\n            font-family: "Menlo";\n            font-size: 20px;\n            border:1px solid lightgray;\n            color:black;\n            margin:15px 0px 15px 0px;\n            padding:10px 10px 10px 10px;\n            background-color: white;\n        }\n\n        #uploadArea input[type="text"] {\n            border:1px solid lightgray;\n        }\n\n        #uploadArea select {\n            border:1px solid lightgray;\n        }\n\n        #login_error {\n            display:none;\n            color:#a94442;\n            border:1px solid #ebccd1;\n            background-color: #f2dede;\n            height:55px;\n            padding:15px;\n            margin-bottom: 20px;\n            border-radius: 4px;\n        }\n\n        #upl_error {\n            display:none;\n            color:#a94442;\n            border:1px solid #ebccd1;\n            background-color: #f2dede;\n            height:55px;\n            padding:15px;\n            margin-bottom: 20px;\n            border-radius: 4px;\n        }\n\n        #upl_success {\n            display:none;\n            color:#3c763d;\n            border:1px solid #d6e9c6;\n            background-color: #dff0d8;\n            height:55px;\n            padding:15px;\n            margin-bottom: 20px;\n            border-radius: 4px;\n        }\n\n        #exitDiv {\n            position:absolute;\n            width:8%;\n            top:1px;\n            right:4px;\n        }\n\n        #uploadBtnDiv {\n            width:35%;\n            margin:0 auto;\n        }\n\n        #btnGoProof {\n            background-color:red;\n        }\n\n        .loginInputs {\n            width:300px;\n        }\n\n        #versionDiv {\n            position:absolute;\n            font-size: 10px;\n            bottom:1px;\n            left:4px;\n        }\n\n        .loadingGif {\n            height:25px;\n            width:4%;\n            margin:0 auto;\n        }\n\n        #loadingGifLogin {\n            display: none;\n        }\n\n        #loadingGifUpload {\n            height:20px;\n            display: none;\n        }\n\n        #lblProofName {\n            font-family: "Comic Sans MS", cursive, sans-serif;\n        }\n\n        #introGif {\n            display:block;\n            background-color: white;\n            height:100%;\n        }\n\n        #loginForm {\n\n        }\n\n        #gotItCtrls {\n            width:15%;\n            margin: 0 auto;\n        }\n\n        #introGifimg {\n            width:62%;\n            margin: 10px auto;\n        }\n\n        #gotItDiv {\n            width:20%;\n            margin: 0 auto;\n        }\n\n        #chkInfoDiv {\n            display: flex;\n            margin: 0 0 0 180px;\n        }\n\n        #chkInfoDiv > div{\n            display: flex;\n            flex-direction: column;\n        }\n\n        #chkInfoDiv > div:last-child {\n\n        }\n\n        #gotItCheckbox {\n            checked: true;\n            margin-left:-2px;\n        }\n\n        #happyProofing {\n            font-size:14px;\n            text-align:center;\n            margin-top:-25px;\n        }\n\n        #instructions {\n            font-size:12px;\n        }\n\n        .noBreak {\n            word-break:keep-all;\n        }\n\n        #flex {\n        \tdisplay:flex;\n        \tmargin: 0 auto;\n        }\n\n        #logoutDiv{\n        \twidth:13%;\n        \tleft:0;\n        \tbottom:0;\n            margin: 0 385px;\n        }\n\n        #gotItDiv {\n            margin-top:-35px;\n        }\n\n        br {\n           line-height: 150%;\n        }\n\n        #signUpDiv {\n            width: 162px;\n        }\n\n        #logoDivMain {\n            height:82%;\n        }\n    </style>\n    <dialog id="'+
a+'">\n        <div id="logoDiv">\n            <img id="GoProofLogo" src="LogoPassword.png"></img>\n        </div>\n\n        <form id="introGif">\n            <div id="introGifimg">\n                <img src="Images/Prototype.gif" width="294" height="412"/>\n            </div>\n            <div id="instructions">\n            \t<p>1. From the Share button top right, select Publish Prototype and then Create Public Link<br />2. Copy the Public Link using the link icon and paste it into the Public XD Link field<br />3. Complete the options and then select Send to GoProof</p>\n            </div>\n            <div id="happyProofing">That\u2019s it, happy proofing!</div>\n\n            <div id="gotItDiv">\n                <button id="gotItBtn" uxp-variant="cta"><b>GOT IT</b></button>\n            </div>\n            <div id="flex">\n            \t<div id="chkBoxDiv">\n            \t\t<label class="row"><span>REMIND ME NEXT TIME</span><input id="gotItCheckbox" type="checkbox" checked="checked" /></label>\n            \t</div>\n            </div>\n        </form>\n\n        <form id="loginForm" method="dialog">\n            <div>\n                <div id="loginPanel">\n                    <div id="logoDivMain">\n                        <div id="userInfo">\n                            <input id="username" placeholder="Email"> </input>\n                            <input type="text" id="maskpassword" value="" placeholder="Password"> </input>\n                            <input type="text" id="password"> </input>\n                            <label id="userID"> </label>\n                        </div>\n\n                        <div id="loginCtrls">\n                            <button id="ok" uxp-variant="cta">LOG IN</button>\n                        </div>\n\n                        <div id="selectUserList">\n                            <select id="selCompany">\n                                <option value="0" disabled selected>Select Company</option>\n                            </select>\n                        </div>\n\n                        <div id="goCtrls">\n                            <button id="go" uxp-variant="cta">GO</button>\n                        </div>\n\n                        <div class="loadingGif">\n                            <img id="loadingGifLogin" src="Loading.gif" />\n                        </div>\n                    </div>\n\n                    <div id="signUpDiv">\n                        <p>Don\'t have an account?</p>\n                        <button id="signUpBtn" uxp-variant="primary">SIGN UP</button>\n                    </div>\n                </div>\n\n                <div id="login_error"></div>\n\n                <div id="versionDiv">\n                    <footer>\n                        Version 1.2\n                    </footer>\n                </div>\n            </div>\n        </form>\n\n        <form id="uploadForm">\n            <div>\n                <div id="uploadArea">\n                    <div id="divXDUrl" class="uploadDivs">\n                        <label id="lblProofName"> PUBLIC XD LINK </label>\n                        <input id="xdURL" type="text" class="inpWhiteBG" placeholder="Paste your copied Public Link in here" value=""></input>\n                    </div>\n\n                    <div id="divProofName" class="uploadDivs">\n                        <label id="lblProofName"> PROOF NAME </label>\n                        <input id="proofName" type="text" class="inpWhiteBG" placeholder="Public Link by default"> </input>\n                    </div>\n\n                    <div id="divClientArea" class="uploadDivs">\n                        <label id="lblClient"> SELECT CLIENT </label>\n                        <select id="ddlClient">\n                            <option>Please select a client</option>\n                        </select>\n\n                        <label id="lblProject"> SELECT PROJECT </label>\n                        <select id="ddlProjects">\n                            <option>Please select a project</option>\n                        </select>\n                    </div>\n\n                    <div id="uploadBtnDiv">\n                        <button id="upload" uxp-variant="cta">Send to GoProof</button>\n                    </div>\n                    <div id="outerLogout">\n                        <div id="logoutDiv">\n                        \t<button id="logout" uxp-variant="warning">Logout</button>\n                        </div>\n                    </div>\n                    <div id="loadingGifUpload" class="loadingGif">\n                        <img src="Loading.gif" />\n                    </div>\n                </div>\n\n                <div id="upl_error"></div>\n                <div id="upl_success">Upload successful</div>\n            </div>\n\n        </form>\n\n        <div id="exitDiv">\n            <button id="btnClose" uxp-variant="action">X</button>\n        </div>\n    </dialog>\n    ';
$("#btnClose").on("click",function(){e.close()});$("#btnClose").on("click",function(){e.close()});$("#btnCancel").on("click",function(){e.close()});var c="",f=0;console.log("platform: "+os.platform());if("win10"==os.platform()||"win32"==os.platform())$("#maskpassword").on("keyup",function(){$("#maskpassword").val().length<f?(c=c.replace(/\*/g,""),c=c.substring(0,c.length-1)):c+=$("#maskpassword").val();f=$("#maskpassword").val().length;$("#maskpassword").val()||(c="");$("#password").val($("#maskpassword").val());
$("#maskpassword").val($("#password").val().replace(/./g,"*"))});else"darwin"==os.platform()&&$("#maskpassword").keydown(function(a){a=parseInt(a.keyCode);var b=String.fromCharCode(a);c=127==a?c.substring(0,c.length-1):c+b;$("#maskpassword").val()||127!=a||(c="");$("#password").val(b);$("#maskpassword").val(c.replace(/./g,"*"))});$("#maskpassword").keydown(function(a){13==a.which&&(a.preventDefault(),$("#ok").click())});$("#xdURL").keydown(function(a){13==a.which&&(a.preventDefault(),$("#proofName").focus())});
$("#username").keydown(function(a){13==a.which&&(a.preventDefault(),$("#maskpassword").focus())});$("#ddlClient").keydown(function(a){13==a.which&&(a.preventDefault(),$("#go").click())});$("#gotItBtn").on("click",function(){saveData($("#gotItCheckbox").is(":checked").toString(),helpGifStore);$("#introGif").css("display","none");$("#loginForm").css("display","block");okClicked=!0});$("#xdURL").on("keydown",function(){$("#upl_success").css("display","none");$("#upl_error").css("display","none");$("#xdURL").val()?
$("#proofName").val("XD Prototype - "+$("#xdURL").val().substring(nthIndex($("#xdURL").val(),"/",4)+1,nthIndex($("#xdURL").val(),"-",1))):$("#upl_error").text("Please enter a URL").css("display","block");$("#upl_error").css("display","none")});$("#proofName").on("keydown",function(){$("#upl_success").css("display","none");$("#upl_error").css("display","none");$("#proofName").val()?$("#upl_error").css("display","none"):$("#upl_error").text("Please enter a proof name").css("display","block")});$("#maskpassword").on("keydown",
function(a){$("#login_error").css("display","none")});$("#signUpDiv").on("click",function(a){launchOAuth(signUpUrl)});$("#ok").on("click",function(a){$("#password").val(c.replace(/\*/g,""));a.preventDefault();$("#error").css("display","none");$("#loadingGifLogin").css("display","block");$("#ok").attr("disabled",!0);a={email:$("#username").val(),password:$("#password").val(),applicationName:"application"};xhrRequest(apiUri+"/User/webLogin","POST",JSON.stringify(a)).then(function(a){saveData($("#username").val(),
emailStore);1==a.length?xhrRequest(apiUri+"/User/loginWithSelectedUser","POST",JSON.stringify({userID:a[0].ID,applicationName:"application",chosenLanguage:a[0].DisplayLanguageCode})).then(function(a){a.meAmPublisher?loadClients().then(function(a){$("#loginForm").css("display","none");$.each(JSON.parse(a),function(a,b){$("#ddlClient").append($("<option>",{value:b.Id,text:b.Name}))});resetUploadForm();$("#loadingGifLogin").css("display","none");$("#uploadForm").css("display","block");loginState=!0}):
($("#login_error").text("You are not permitted to upload proofs"),$("#login_error").css("display","block"),resetLoginForm())})["catch"](function(a){$("#login_error").text("Server error: "+a);$("#login_error").css("display","block")}):($("#loadingGifLogin").css("display","none"),$.each(a,function(a,b){$("#selCompany").append($("<option>",{value:b.ID,text:b.companyName}))}),$("#selCompany").prop("selectedIndex",0),$("#selectUserList").css("display","block"),$("#goCtrls").css("display","block"),$("#loginCtrls").css("display",
"none"))})["catch"](function(a){$("#ok").attr("disabled",!1);$("#loadingGifLogin").css("display","none");$("#login_error").text("Email or password incorrect");$("#login_error").css("display","block");$("#password").focus()})});$("#go").on("click",function(a){a.preventDefault();$("#loadingGifLogin").css("display","block");$("#go").attr("disabled",!0);a=$("#selCompany").val();""!=a&&0!=a?(a={userID:parseInt(a),applicationName:application,chosenLanguage:"en"},xhrRequest(apiUri+"/User/loginWithSelectedUser",
"POST",JSON.stringify(a)).then(function(a){a.meAmPublisher?loadClients().then(function(a){$("#loginForm").css("display","none");$.each(JSON.parse(a),function(a,b){$("#ddlClient").append($("<option>",{value:b.Id,text:b.Name}))});resetUploadForm();$("#uploadForm").css("display","block");loginState=!0}):($("#login_error").text("You are not permitted to upload proofs"),$("#login_error").css("display","block"),resetLoginForm())})["catch"](function(a){$("#login_error").text("Server error: "+a);$("#login_error").css("display",
"block");console.error(a)})):($("#login_error").text("Please select a company"),$("#login_error").css("display","block"),$("#go").attr("disabled",!1),$("#loadingGifLogin").css("display","none"))});$("#upload").on("click",function(){$("#upl_error").css("display","none");$("#loadingGifLogin").css("display","block");if($("#xdURL").val()){if(!$("#proofName").val())return $("#proofName").focus(),$("#upl_error").text("Please enter a proof name"),$("#upl_error").css("display","block"),!1;if(isNaN(parseInt($("#ddlClient").val())))return $("#upl_error").text("Please select a client"),
$("#upl_error").css("display","block"),!1;if(isNaN(parseInt($("#ddlProjects").val()))||0==$("#ddlProjects").val())return $("#upl_error").text("Please select a project"),$("#upl_error").css("display","block"),!1;if(validURL($("#xdURL").val())){var a={UploadedFiles:[],UploadedSharedFiles:[],StartPage:0,XDUrl:ammendURL($("#xdURL").val()),Type:"",Client:{id:parseInt($("#ddlClient").val()),Project:{id:parseInt($("#ddlProjects").val()),Document:{Name:$("#proofName").val(),Review:{Name:$("#proofName").val(),
TypeId:2}}}}};xhrRequest(apiUri+"/MWB/Upload/URL","POST",JSON.stringify(a)).then(function(a){a={redirectType:1,reviewID:a.ReviewId,userID:parseInt($("#userID").text()),ReviewId:a.ReviewId,programID:"XD"};a={jsonString:JSON.stringify(a),id:null,ticketID:"",userID:0};createParamTicket(JSON.stringify(a)).then(function(a){launchOAuth(apiUri+"/Publisher/Upload?id="+a.guid);$("#upl_success").css("display","block")})["catch"](function(a){console.error(a)})})["catch"](function(a){console.error(a)});resetUploadForm()}else $("#xdURL").focus(),
$("#upl_error").text("Please enter a valid XD prototype URL"),$("#upl_error").css("display","block")}else $("#xdURL").focus(),$("#upl_error").text("Please enter a URL"),$("#upl_error").css("display","block")});$("#ddlClient").change(function(){$("#ddlProjects").find("option").remove().end();$("#ddlProjects").append($("<option>",{value:0,text:"Please select a project"}));loadProjects($("#ddlClient").val()).then(function(a){$.each(JSON.parse(a),function(a,b){$("#ddlProjects").append($("<option>",{value:b.Id,
text:b.Name}))});$("#ddlProjects").prop("selectedIndex",0)})["catch"](function(a){})});$("#logout").on("click",function(a){console.log("logout");okClicked=loginState=!1;e.remove()});return e=document.querySelector(d)}
function xhrRequest(a,b,d){return new Promise(function(e,c){var f=new XMLHttpRequest;f.onload=function(a){200===f.status?e(f.response):(console.log("error: "+f.status),c(f.response))};f.onerror=function(){console.log("The request failed")};f.onabort=function(){console.log("The request was aborted")};f.open(b,a);f.responseType="json";f.setRequestHeader("Content-Type","application/json;charset=UTF-8");f.send(d)})}
function loadClients(){var a=xhrRequest(apiUri+"/MWB/User/Clients","GET",null);return new Promise(function(b,d){a.then(function(a){b(a)})["catch"](function(a){d(a)})})}function loadProjects(a){var b=xhrRequest(apiUri+"/MWB/Client/"+a+"/Projects","GET",null);return new Promise(function(a,e){b.then(function(b){a(b)})["catch"](function(a){e(a)})})}
function createParamTicket(a){var b=xhrRequest(apiUri+"/ParamTicket/createParamTicket","POST",a);return new Promise(function(a,e){b.then(function(b){a(b)})["catch"](function(a){e(a)})})}function launchOAuth(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){require("uxp").shell.openExternal(a);b.jumpToEnd()})}function validURL(a){return"https://xd.adobe.com"!=a.substring(0,20)?!1:!0}
function ammendURL(a){var b=$("#xdURL").val().substring(nthIndex($("#xdURL").val(),"/",3)+1,nthIndex($("#xdURL").val(),"/",4)),d=a;"view"==b&&(d=a.substring(0,nthIndex($("#xdURL").val(),"/",3)+1)+"embed"+a.substring(nthIndex($("#xdURL").val(),"/",4),nthIndex($("#xdURL").val(),"/",5)));return d}function nthIndex(a,b,d){for(var e=a.length,c=-1;d--&&c++<e&&!(c=a.indexOf(b,c),0>c););return c}
function resetUploadForm(){$("#xdURL").val("");$("#proofName").val("");$("#ddlClient").prop("selectedIndex",0);$("#ddlProjects").prop("selectedIndex",0);$("#loadingGifLogin").css("display","none")}
function resetLoginForm(){$("#maskpassword").focus();$("#selCompany").find("option").remove().end();$("#selCompany").append($("<option>",{value:0,text:"Select Company"}));$("#selectUserList").css("display","none");$("#goCtrls").css("display","none");$("#loginCtrls").css("display","block");$("#loadingGifLogin").css("display","none");$("#ok").attr("disabled",!1);$("#go").attr("disabled",!1)}
function saveData(a,b){var d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return c.yield(fs.getDataFolder(),2);case 2:return d=c.yieldResult,c.setCatchFinallyBlocks(3),c.yield(d.createEntry(b,{overwrite:!0}),5);case 5:return e=c.yieldResult,c.yield(e.write(a),6);case 6:return c["return"](c.yieldResult);case 3:c.enterCatchBlock();case 4:return c["return"](!0)}})}
function readData(a){var b,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return b=null,c.yield(fs.getDataFolder(),2);case 2:return d=c.yieldResult,c.setCatchFinallyBlocks(3),c.yield(d.getEntry(a),5);case 5:return e=c.yieldResult,c.yield(e.read(),6);case 6:b=c.yieldResult;c.leaveTryBlock(4);break;case 3:c.enterCatchBlock();case 4:return c["return"](b)}})}
function showUpload(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){try{readData(helpGifStore).then(function(a){var b=createDialog("dialog",a);readData(emailStore).then(function(c){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){$("#username").val(c);if((null===a||"true"===a)&&!okClicked)$("#loginForm").css("display","none");else if(null!==a&&"true"!==a||!okClicked||loginState)loginState?($("#loginForm").css("display","none"),$("#introGif").css("display","none"),$("#uploadForm").css("display",
"block")):"false"===a&&$("#introGif").css("display","none");return d.yield(b.showModal(),0)})})})}catch(d){}a.jumpToEnd()})}module.exports={commands:{showUpload:showUpload}};